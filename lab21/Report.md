# Отчет по лабораторной работе № 21
## по курсу "Практикум программирования"

Студент группы М8О-108Б-23 Соловьева Надежда Сергеевна

Работа выполнена 

Преподаватель: каф. 806 Севастьянов Виктор Сергеевич

1. **Тема**: Программирование на интерпретируемых командных языках  
2. **Цель работы**: Составить программу выполнения заданных действий над файлами на одном из интерпретируемых командных языков OC UNIX (Shell, Cshell, Bash). 
3. **Задание (Вариант №):** Вариант №19: Подсчет числа строк в исходных файлах (*.h, *.cpp) директории и подкаталогов с вычислением суммарной длины (в строках).
4. **Алгоритм решения:**  
   Программа на Bash:
     * count_lines() - Функция, получающая на вход название файла, считывающая его длину в строках и возвращающая это значение.
     * traverse_directory() - Основная функция, получающая на вход название директории и имеющее начальное значение переменной total_lines=0 (суммарная длина). Проверяем, существует ли введенная директория, в противном случае соответствующий вывод. С помощью цикла while проходимся по всем файлам данной директории и проверяем их на соотвестствие типу *.h или *.cpp. В случае соответствия для каждого файла с помощью функции count_lines() выводится его длина в строках, а переменная total_lines увеличивается на соответствующую длину. По окончанию цикла выводится суммарная длина в строках для всех подходящих по типу файлов.
6. **Тестовые данные:**

| Входные данные              | Выходные данные                                                     | Описание тестируемого случая                          |
|-----------------------------|---------------------------------------------------------------------|-------------------------------------------------------|
| Введите имя директории:     | Файл: Test1/check_even_ord.cpp, Количество строк: 10                | Пример работы с обычной директорией                   |                                        
| Test1                       | Файл: Test1/adding_two_num.cpp, Количество строк: 9                 |                                                       |
|                             | -------------------                                                 |                                                       |
|                             | Суммарное количество строк: 19                                      |                                                       |
|                             |                                                                     |                                                       |                                               
| Введите имя директории:     | Файл: Test4/check_prime.cpp, Количество строк: 21                   | Пример работы с директорией, содержащей подкаталог    |
| Test4                       | Файл: Test4/Test4.1/check_even_ord.cpp, Количество строк: 10        |                                                       |
|                             | Файл: Test4/Test4.1/adding_two_num.cpp, Количество строк: 9         |                                                       |
|                             | -------------------                                                 |                                                       |
|                             | Суммарное количество строк: 40                                      |                                                       |
|                             |                                                                     |                                                       |
| Введите имя директории:     | Файл: Test2/sum_1_to_n.cpp, Количество строк: 12                    | Пример работы с обычной директорией                   |
| Test2                       | Файл: Test2/check_prime.cpp, Количество строк: 21                   |                                                       |
|                             | Файл: Test2/find_max_num.cpp, Количество строк: 12                  |                                                       |
|                             | -------------------                                                 |                                                       |
|                             | Суммарное количество строк: 45                                      |                                                       |
|                             |                                                                     |                                                       |
| Введите имя директории:     | -------------------                                                 | Пример работы с пустой директорией                    |
| Test3                       | Суммарное количество строк: 0                                       |                                                       |
|                             |                                                                     |                                                       |
| Введите имя директории:     | Директория не существует                                            | Пример работы с несуществующей директорией            |
| test1                       |                                                                     |                                                       |

7. **Протокол**:

    Программа на Bash: [count_lines.sh](/count_lines.sh)  
  ```
#!/bin/bash

# Функция для подсчета числа строк в файле
count_lines() {
    file="$1"
    lines=$(wc -l < "$file")
    echo "$lines"
}

# Функция для обхода директории и ее подкаталогов
traverse_directory() {
    directory="$1"
    total_lines=0

    # Проверяем, существует ли указанная директория
    if [ -d "$directory" ]; then
        # Используем команду find для выбора файлов *.h и *.cpp
        # Выполняем подсчет числа строк в каждом файле и выводим его
        while IFS= read -r file; do
            if [[ $file == *".h" ]] || [[ $file == *".cpp" ]]; then
                lines=$(count_lines "$file")
                echo "Файл: $file, Количество строк: $lines"
                total_lines=$((total_lines + lines))
            fi
        done < <(find "$directory" -type f)

        echo "-------------------"
        echo "Суммарное количество строк: $total_lines"
    else
        echo "Директория не существует"
        exit 1
    fi
}

# Получаем от пользователя имя директории
echo "Введите имя директории:"
read directory

# Вызываем функцию для обхода директории и подсчета числа строк в файлах
traverse_directory "$directory"
  ```

  Листинг работы:  
  ```
hopeee@hopeeenad:~/repository/Lab/lab21$ bash count_lines.sh
Введите имя директории:
Test1
Файл: Test1/check_even_ord.cpp, Количество строк: 10
Файл: Test1/adding_two_num.cpp, Количество строк: 9
-------------------
Суммарное количество строк: 19
hopeee@hopeeenad:~/repository/Lab/lab21$ bash count_lines.sh
Введите имя директории:
Test4
Файл: Test4/check_prime.cpp, Количество строк: 21
Файл: Test4/Test4.1/check_even_ord.cpp, Количество строк: 10
Файл: Test4/Test4.1/adding_two_num.cpp, Количество строк: 9
-------------------
Суммарное количество строк: 40
hopeee@hopeeenad:~/repository/Lab/lab21$ bash count_lines.sh
Введите имя директории:
Test2
Файл: Test2/sum_1_to_n.cpp, Количество строк: 12
Файл: Test2/check_prime.cpp, Количество строк: 21
Файл: Test2/find_max_num.cpp, Количество строк: 12
-------------------
Суммарное количество строк: 45
hopeee@hopeeenad:~/repository/Lab/lab21$ bash count_lines.sh
Введите имя директории:
Test3
-------------------
Суммарное количество строк: 0
hopeee@hopeeenad:~/repository/Lab/lab21$ bash count_lines.sh
Введите имя директории:
test1
Директория не существует
  ```
  
7. Вывод: В процессе работы познакомились с интерпретируемыми командными языками программирования и научились писать код на Bash. В целом работа понравилась, она была не особо сложной и позволила научиться многому новому.  
Итог: 8/10.   
